---
title: Installation
description: How to install, build, and use moonlight
sidebar:
  order: 1
---
import { FileTree, LinkButton } from "@astrojs/starlight/components";

There are several ways to install moonlight. It is suggested to use the installer or CLI if you are not a developer.

:::caution
moonlight (and other client mods) are against the Discord terms of service. **Client mods are a risk** - if this makes you uncomfortable, don't install them.

Despite that, we try our best to ensure your account and system is safe. There are no reported bans from using moonlight, and moonlight disables tracking and analytics to be less detectable. Discord is more focused on fighting spam and API abuse than client modders.
:::

## moonlight installer

<LinkButton href="https://github.com/moonlight-mod/moonlight-installer/releases/latest/download/moonlight-installer.exe" icon="seti:windows">Download</LinkButton>
<LinkButton href="https://github.com/moonlight-mod/moonlight-installer/releases/latest/download/moonlight-installer-macos.dmg" icon="apple">Download</LinkButton>

The moonlight [installer](https://github.com/moonlight-mod/moonlight-installer) automates the installation process for you. **This is the suggested way to install moonlight for Windows and macOS users.**

To use it, [download](https://github.com/moonlight-mod/moonlight-installer/releases/latest) and run the installer, download moonlight through it, and then patch a Discord installation. Discord installations are autodetected on your machine. Keep the installer in the event that a Discord update breaks moonlight, so you can unpatch Discord or update moonlight.

## moonlight-cli

A [command line installer](https://github.com/moonlight-mod/moonlight-installer/tree/main/crates/moonlight-cli) can be compiled from source manually and used to patch moonlight. **This is the suggested way to install moonlight for Linux users.**

```shell
cargo install --git https://github.com/moonlight-mod/moonlight-installer.git moonlight-cli
moonlight-cli install stable
moonlight-cli patch /path/to/discord/executable
```

You can specify a custom moonlight `dist` directory with `moonlight-cli patch -m /path/to/moonlight/dist`.

:::note
Discord installations from Linux package managers may not work well with moonlight (due to root permissions or immutability). It is suggested to install Discord locally into a path like `~/.local/share`.

A script to install Discord locally (maintained by a community member) is available [here](https://gist.github.com/maddymeows/6af1a5d5a870c13b7b159c4463edee70). You will need to patch this Discord installation manually after installing it.
:::

## Manual installations

Manual installations are suggested for those who wish to work on moonlight itself.

- [Build moonlight](/dev/setup).
- Go to your Discord install's `resources` folder.
- Rename the `app.asar` to `_app.asar`, and create an `app` folder. Discord will load the folder instead of the `.asar` now that it has been renamed.
- Create the following files in `resources/app`:

```json title="package.json"
{
  "name": "discord",
  "main": "./injector.js",
  "private": true
}
```

```js title="injector.js"
require("/path/to/moonlight/dist/injector").inject(
  require("path").join(__dirname, "../_app.asar")
);
```

Adjust the `/path/to/moonlight/dist` to point to the `dist` folder in your locally cloned moonlight install.

You should have the following structure:

<FileTree>
- resources
  - _app.asar
  - app
    - injector.js
    - package.json
</FileTree>

After first launch, moonlight will create a config directory in the Electron `appData` path named `moonlight-mod`:

- Windows: `%AppData%/moonlight-mod`
- macOS: `~/Library/Application Support/moonlight-mod`
- Linux: `~/.config/moonlight-mod`

Each Discord branch has its own `.json` file for configuration.

## Browser

moonlight optionally runs in the browser. To use it, [build moonlight](/dev/setup), and then build the browser extension:

- Manifest v3 (Chrome): `pnpm run browser`
- Manifest v2 (Firefox): `pnpm run browser-mv2`

The output extension will be at `dist/browser`. Chrome users can check "Developer mode" and click "Load unpacked" in `chrome://extensions`, and Firefox users can click "Load Temporary Add-on" in `about:debugging`.

Browser support is experimental and may be unreliable. Developing extensions or using custom repositories is not supported with the browser extension.

## rocketship

Linux users can install a custom Discord build with [rocketship](https://github.com/moonlight-mod/rocketship) and then install moonlight into it. Enable the rocketship extension after installation.

:::caution
rocketship is experimental and may break. If you don't care about the benefits of rocketship, use [moonlight-cli](#moonlight-cli) instead.
:::

## Nix

moonlight offers [a Nix flake](https://github.com/moonlight-mod/moonlight/blob/main/flake.nix) which has an overlay to install moonlight on top of Discord. The flake is not monitored, so if it fails to build, please leave an issue.
